---
interface NewsItem {
  title: string;
  url: string;
  publication: string;
  date: Date;
  description?: string | null;
  category?: string | null;
  featured?: boolean;
}

interface Props {
  items: NewsItem[];
  limit?: number;
  showCategory?: boolean;
}

const { items, limit, showCategory = false } = Astro.props;

const displayItems = limit ? items.slice(0, limit) : items;
---

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {displayItems.map((item, i) => (
    <a
      href={item.url}
      target="_blank"
      rel="noopener noreferrer"
      class:list={[
        "group block p-6 border border-border bg-surface rounded-sm no-underline card-hover reveal",
        `reveal-delay-${Math.min((i % 3) + 1, 3)}`,
        item.featured && "md:col-span-2 lg:col-span-2",
      ]}
    >
      <div class="flex items-center gap-2 mb-3">
        <span class="text-xs font-semibold text-forest uppercase tracking-wider">
          {item.publication}
        </span>
        {showCategory && item.category && (
          <>
            <span class="text-text-muted text-xs">&middot;</span>
            <span class="text-xs text-text-muted">{item.category}</span>
          </>
        )}
      </div>

      <h3 class="font-display text-lg md:text-xl text-text m-0 mb-2 group-hover:text-forest transition-colors leading-snug">
        {item.title}
      </h3>

      {item.description && (
        <p class="text-text-secondary text-sm leading-relaxed m-0 mb-3 line-clamp-2">
          {item.description}
        </p>
      )}

      <span class="text-xs text-text-muted">
        {item.date.toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric" })}
      </span>
    </a>
  ))}
</div>
