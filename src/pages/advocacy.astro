---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import SectionHeader from "../components/SectionHeader.astro";
import NewsGrid from "../components/NewsGrid.astro";
const news = await getCollection("news");
const advocacyNews = news
  .filter((n) => {
    const cat = (n.data.category || "").toLowerCase();
    const pub = (n.data.publication || "").toLowerCase();
    return cat.includes("housing") || cat.includes("politic") || cat.includes("advocacy") ||
           pub.includes("alameda") || cat.includes("civic") || cat.includes("local");
  })
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 9);

// If not enough advocacy-specific news, fall back to all
const displayNews = advocacyNews.length >= 3 ? advocacyNews : news.sort((a, b) => b.data.date.getTime() - a.data.date.getTime()).slice(0, 6);

const positions = [
  { role: "Executive Board Member", org: "California Democratic Party", since: "2025" },
  { role: "Open Government Commissioner", org: "City of Alameda", since: "2025" },
  { role: "ADEM Delegate (3x elected)", org: "CA Democratic Party, AD-18", since: "2021" },
  { role: "Vice President", org: "City of Alameda Democratic Club", since: "" },
  { role: "Housing Committee Member", org: "Northern Alameda County Sierra Club", since: "" },
  { role: "Co-founder & Leader", org: "East Bay YIMBY", since: "" },
];

const campaigns = [
  {
    title: "YIMBYs for Harris",
    year: "2024",
    description: "Led a virtual fundraiser raising over $125,000 to support Vice President Kamala Harris's presidential bid. Now serving in leadership with YIMBY Democrats for America.",
  },
  {
    title: "HCD Lawsuit Victory",
    year: "2023",
    description: "Sued the State of California's Department of Housing and Community Development over jobs/housing balance calculations that underestimated housing needs by hundreds of thousands of units â€” and won.",
  },
  {
    title: "Measure Z - Alameda",
    year: "2020",
    description: "Helped lead the campaign for Measure Z, an initiative to revise restrictive housing laws and allow for more housing in Alameda.",
  },
  {
    title: "Measure A - Alameda",
    year: "2019",
    description: "Helped lead the campaign for Measure A, aimed at revising Alameda's restrictive housing charter to enable more housing construction.",
  },
  {
    title: "Alphabet Workers Union",
    year: "2021",
    description: "Early founding member of the Alphabet Workers Union (AWU) at Google, working on labor rights for full-time employees and contract workers.",
  },
];
---

<Layout
  title="Advocacy"
  description="Housing advocacy, civic leadership, and political engagement in California and beyond."
>
  <!-- Hero -->
  <section class="relative bg-dark overflow-hidden">
    <div class="absolute inset-0 opacity-[0.02]" style="background-image: url('data:image/svg+xml,%3Csvg width=&quot;40&quot; height=&quot;40&quot; viewBox=&quot;0 0 40 40&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;%3E%3Cg fill=&quot;%23ffffff&quot; fill-opacity=&quot;1&quot; fill-rule=&quot;evenodd&quot;%3E%3Cpath d=&quot;M0 40L40 0H20L0 20M40 40V20L20 40&quot;/%3E%3C/g%3E%3C/svg%3E');"></div>
    <div class="container-narrow relative z-10 py-20 md:py-28">
      <span class="overline text-gold block mb-4 reveal">Advocacy & Civic Leadership</span>
      <h1 class="text-text-inverse m-0 mb-6 max-w-3xl reveal reveal-delay-1">
        Fighting for housing, democracy, and transparent government
      </h1>
      <p class="text-xl text-text-muted max-w-2xl m-0 reveal reveal-delay-2">
        From the California Democratic Party to Alameda City Hall.
        Driven by personal experience with homelessness, working to make housing a right, not a privilege.
      </p>
    </div>
    <div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gold/30 to-transparent"></div>
  </section>

  <!-- Narrative -->
  <section class="section bg-ivory">
    <div class="container-narrow">
      <div class="max-w-3xl reveal">
        <SectionHeader
          overline="Mission"
          title="Building a more equitable California"
        />
        <div class="prose">
          <p>
            Beyond technology, I'm deeply involved in civic engagement and housing advocacy.
            I'm currently an elected Executive Board Member and delegate (ADEM) in the California Democratic Party,
            where I advocate for progressive housing policies. I serve on Alameda's
            <a href="https://www.alamedaca.gov/GOVERNMENT/Boards-Commissions/Open-Government-Commission" target="_blank" rel="noopener noreferrer">Open Government Commission</a>,
            promoting transparency and accountability in local government.
          </p>
          <p>
            My advocacy is personal, informed by my own experience of homelessness in my early 20s.
            I've participated in legal and grassroots efforts enforcing housing laws across California, including
            <a href="https://www.yimbylaw.org/press/hcd-include-jobs-housing-balance" target="_blank" rel="noopener noreferrer">suing and winning</a>
            against the State of California's Department of Housing and Community Development for their application of
            the state's housing laws around the jobs and housing ratio, which had underestimated the housing needs
            of the state by hundreds of thousands of units.
          </p>
          <p>
            I'm a leader within <a href="https://eastbayyimby.org/" target="_blank" rel="noopener noreferrer">East Bay YIMBY</a>,
            advocating for sustainable urban development, affordable housing, and zoning reform.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Positions -->
  <section class="section-sm bg-cream">
    <div class="container-narrow">
      <SectionHeader overline="Roles" title="Positions held" />
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {positions.map((pos, i) => (
          <div class:list={["p-6 border border-border bg-surface reveal", `reveal-delay-${Math.min(i + 1, 3)}`]}>
            <h3 class="font-display text-lg text-text m-0 mb-1">{pos.role}</h3>
            <p class="text-forest text-sm font-medium m-0 mb-2">{pos.org}</p>
            {pos.since && <span class="text-xs text-text-muted">Since {pos.since}</span>}
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Campaigns -->
  <section class="section bg-ivory">
    <div class="container-narrow">
      <SectionHeader
        overline="Impact"
        title="Campaigns & initiatives"
        description="Key efforts in housing policy, labor rights, and political organizing."
      />
      <div class="max-w-3xl flex flex-col gap-0">
        {campaigns.map((campaign, i) => (
          <div class:list={["relative pl-12 md:pl-16 py-8 reveal", `reveal-delay-${Math.min(i + 1, 3)}`]}>
            {/* Line */}
            <div class="absolute left-4 md:left-6 top-0 bottom-0 w-px bg-border" aria-hidden="true"></div>
            {/* Dot */}
            <div class="absolute left-2.5 md:left-4.5 top-9 w-3 h-3 rounded-full border-2 border-gold bg-ivory" aria-hidden="true"></div>

            <span class="text-sm text-gold font-semibold tracking-wider block mb-1.5">{campaign.year}</span>
            <h3 class="font-display text-xl text-text m-0 mb-3">{campaign.title}</h3>
            <p class="text-text-secondary text-sm leading-relaxed m-0 max-w-xl">{campaign.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Community -->
  <section class="dark-section section-sm">
    <div class="container-narrow">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-10 md:gap-16">
        <div class="reveal">
          <span class="overline text-gold block mb-4">Community</span>
          <h2 class="text-text-inverse m-0 mb-4">Local leadership</h2>
          <p class="text-text-muted text-sm leading-relaxed m-0">
            I run both the Alameda Reddit community (25,800+ members) and
            <a href="https://www.alamedapeeps.com/" target="_blank" rel="noopener noreferrer" class="text-gold-light hover:text-gold no-underline">Alameda Peeps</a>
            Facebook group (20,400+ members), connecting over 20,000 residents from Alameda, California.
          </p>
        </div>
        <div class="reveal reveal-delay-1">
          <span class="overline text-gold block mb-4">Labor</span>
          <h2 class="text-text-inverse m-0 mb-4">Workers' rights</h2>
          <p class="text-text-muted text-sm leading-relaxed m-0">
            In 2021, I was among the early founding members of the Alphabet Workers Union at Google.
            Through AWU, I worked on labor rights, focusing on unionizing both full-time employees and contract workers.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Related news -->
  {displayNews.length > 0 && (
    <section class="section-sm bg-cream">
      <div class="container-narrow">
        <SectionHeader overline="In the Press" title="Advocacy in the news" />
        <NewsGrid
          items={displayNews.map((n) => ({
            title: n.data.title,
            url: n.data.url,
            publication: n.data.publication,
            date: n.data.date,
            description: n.data.description,
            category: n.data.category,
            featured: n.data.featured,
          }))}
          showCategory={true}
          limit={6}
        />
      </div>
    </section>
  )}
</Layout>
